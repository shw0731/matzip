<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="QnA">

<typeAlias alias="qnaReg" type="QnAVO"/>
<!-- 리절트 맵 -->

<resultMap id="qnaRes" class="QnABoard">
  <result property="serviceNo" column="serviceNo"/>
  <result property="ID" column="ID"/>
  <result property="subject" column="subject"/>
  <result property="context" column="context"/>
  <result property="password" column="password"/>
  <result property="reg_date" column="reg_date"/>
  <result property="isAnswer" column="isAnswer"/>
  <result property="isPrivate" column="isPrivate"/>
</resultMap>
<!-- QNABOARD 의 모든 데이터를 가져온다 -->
<select id="select-all">
SELECT * FROM QNABOARD 
</select>
<!-- QNABOARD 의 SERVICENO의 최고 값을 SERVICENO로 지정하여 꺼내온다 -->
<select id="QnAselectNo" resultMap="qnaRes" parameterClass="qnaReg">
SELECT max(serviceNo) as serviceNo FROM QNABOARD
</select>
<!-- QNABOARD의 지정된 SERVICENO의 모든 값을 꺼내온다. -->
<select id="QnAselectNo" resultMap="qnaRes" parameterClass="qnaReg">
SELECT * FROM QNABOARD WHERE SERVICENO=#serviceNo#
</select>
<!-- QNABOARD에 글작성에 필요한 정보들을 저장한다. -->
<insert id="QnAInsert" parameterClass="qnaRes">
INSERT INTO QNABOARD(SERVICENO, ID, SUBJECT, CONTEXT, PASSWORD, REG_DATE, ISANSWER) 
VALUES(SERVICENO_SEQUENCE.NEXTVAL, #ID#, #subject#, #context#, #password#, #reg_date#, #isAnswer#)
</insert>
<!-- QNABOARD의 답변에 필요한 정보들을 저장한다. -->
<insert id="QnAInsertReply" parameterClass="qnaRes">
INSERT INTO QNABOARD(SERVICENO, ID, SUBJECT, CONTEXT, PASSWORD, REG_DATE, ISANSWER, ISPRIVATE)
VALUES(SERVICENO_SEQUENCE.NEXTVAL, #ID#, #subject#, #context#, #password#, #reg_date#, #isAnswer#, #isPrivate#)
</insert>
<!-- QNABOARD의 정보를 수정한다 -->
<update id="QnAUpdate" parameterClass="qnaRes">
UPDATE FROM QNABOARD SET SUBJECT=#subject#, CONTEXT=#context#, PASSWORD=#password#, REG_DATE=#reg_date#, ISANSWER=#isAnswer#, SERVICENO=#serviceNo#, ISPRIVATE=#isPrivate#
</update>
<!-- QNABOARD의 작성내용을 삭제한다. -->
<delete id="QnADelete" parameterClass="qnaRes">
DELETE FROM QNABOARD WHERE SERVICENO=#serviceNo#
</delete>
</sqlMap>